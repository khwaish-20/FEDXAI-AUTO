<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FEDXAI V5 Ultimate</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link
        href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700;900&family=Rajdhani:wght@400;600;700&display=swap"
        rel="stylesheet">
    <style>
        body {
            background-color: #020617;
            color: #e2e8f0;
            font-family: 'Rajdhani', sans-serif;
            background-image: radial-gradient(circle at 60% 50%, #1e293b 0%, #020617 70%);
            height: 100vh;
            overflow: hidden;
        }

        .font-hud {
            font-family: 'Orbitron', sans-serif;
        }

        .glass-panel {
            background: rgba(15, 23, 42, 0.7);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(56, 189, 248, 0.15);
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.6);
        }

        .nav-btn.active {
            background: rgba(56, 189, 248, 0.1);
            color: #38bdf8;
            border-bottom: 2px solid #38bdf8;
        }

        /* Car Part Markers */
        .part-marker {
            position: absolute;
            width: 16px;
            height: 16px;
            background: #334155;
            border: 2px solid #94a3b8;
            border-radius: 50%;
            cursor: pointer;
            z-index: 10;
            transition: all 0.3s;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
        }

        .part-marker:hover {
            transform: scale(1.3);
            border-color: #fff;
            background: #38bdf8;
        }

        .part-critical {
            background: #ef4444;
            border-color: #fee2e2;
            box-shadow: 0 0 15px #ef4444;
            animation: pulse-marker 1s infinite;
        }

        .ar-label {
            position: absolute;
            background: rgba(15, 23, 42, 0.95);
            border: 1px solid #ef4444;
            color: #ef4444;
            padding: 4px 8px;
            border-radius: 4px;
            font-family: 'Orbitron';
            font-size: 10px;
            white-space: nowrap;
            display: none;
            z-index: 20;
            transform: translateY(-40px) translateX(-50%);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
        }

        .part-critical+.ar-label {
            display: block;
            animation: float-up 0.5s ease-out;
        }

        @keyframes pulse-marker {
            0% {
                transform: scale(1);
                box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.7);
            }

            70% {
                transform: scale(1.5);
                box-shadow: 0 0 0 10px rgba(239, 68, 68, 0);
            }

            100% {
                transform: scale(1);
                box-shadow: 0 0 0 0 rgba(239, 68, 68, 0);
            }
        }

        @keyframes float-up {
            from {
                opacity: 0;
                transform: translateY(-20px) translateX(-50%);
            }

            to {
                opacity: 1;
                transform: translateY(-40px) translateX(-50%);
            }
        }

        /* Custom Scrollbar */
        .overflow-y-auto::-webkit-scrollbar {
            width: 8px;
        }

        .overflow-y-auto::-webkit-scrollbar-track {
            background: #0f172a;
        }

        .overflow-y-auto::-webkit-scrollbar-thumb {
            background: #334155;
            border-radius: 4px;
        }

        .overflow-y-auto::-webkit-scrollbar-thumb:hover {
            background: #475569;
        }

        /* SVG Car Fill */
        .car-path {
            stroke: #22d3ee;
            stroke-width: 2;
            fill: rgba(30, 41, 59, 0.4);
            filter: drop-shadow(0 0 8px rgba(34, 211, 238, 0.3));
        }
    </style>
</head>

<body class="flex flex-col h-screen">

    <!-- Navbar -->
    <nav
        class="flex justify-between items-center px-4 py-3 border-b border-slate-800 bg-slate-950/90 z-50 h-14 shrink-0">
        <div class="flex items-center gap-3">
            <i class="fa-solid fa-bolt text-cyan-400 text-lg"></i>
            <h1 class="font-hud text-lg font-bold tracking-widest text-white">FEDXAI <span
                    class="text-cyan-400">PRO</span></h1>
        </div>

        <div class="flex gap-1 bg-slate-900 p-1 rounded-lg border border-slate-800">
            <button onclick="showPage('live')" id="nav-live"
                class="nav-btn active px-4 py-1 rounded text-xs font-bold tracking-wider text-slate-400 hover:text-white transition-all">
                <i class="fa-solid fa-gauge-high mr-2"></i> COCKPIT
            </button>
            <button onclick="showPage('health')" id="nav-health"
                class="nav-btn px-4 py-1 rounded text-xs font-bold tracking-wider text-slate-400 hover:text-white transition-all">
                <i class="fa-solid fa-heart-pulse mr-2"></i> HEALTH
            </button>
        </div>

        <div class="flex gap-2">
            <button onclick="startSimulation()"
                class="bg-indigo-600 hover:bg-indigo-500 text-white px-3 py-1 rounded text-[10px] font-bold shadow-lg">
                <i class="fa-solid fa-robot mr-1"></i> DEMO
            </button>
            <button onclick="connectBLE()" id="btn-conn"
                class="bg-blue-600 hover:bg-blue-500 text-white px-3 py-1 rounded text-[10px] font-bold shadow-lg shadow-blue-500/20">
                CONNECT
            </button>
        </div>
    </nav>

    <!-- CONTENT AREA -->
    <div class="relative flex-1 overflow-hidden p-4">

        <!-- PAGE 1: LIVE COCKPIT (Left Gauges / Right Car) -->
        <div id="page-live" class="h-full grid grid-cols-12 gap-4">

            <!-- LEFT: GAUGES (Equal Sized Grid) - 25% -->
            <div class="col-span-3 h-full overflow-y-auto pr-2 flex flex-col gap-3">

                <!-- RPM -->
                <div
                    class="glass-panel rounded-lg p-4 flex flex-col justify-center items-center min-h-[140px] relative group h-full">
                    <div class="absolute inset-0 bg-cyan-500/5 group-hover:bg-cyan-500/10 transition-colors"></div>
                    <div
                        class="w-10 h-10 rounded-full bg-cyan-900/30 flex items-center justify-center text-cyan-400 mb-2">
                        <i class="fa-solid fa-gauge-high"></i>
                    </div>
                    <h3 class="text-slate-400 text-[10px] font-bold uppercase tracking-widest">Engine RPM</h3>
                    <div class="font-hud text-3xl font-bold text-white my-1" id="val-rpm">0</div>
                    <div class="w-full bg-slate-800 h-1.5 rounded-full mt-2 overflow-hidden">
                        <div id="bar-rpm" class="h-full bg-cyan-400 w-0 transition-all"></div>
                    </div>
                </div>

                <!-- TEMP -->
                <div
                    class="glass-panel rounded-lg p-4 flex flex-col justify-center items-center min-h-[140px] relative group h-full">
                    <div class="absolute inset-0 bg-orange-500/5 group-hover:bg-orange-500/10 transition-colors"></div>
                    <div
                        class="w-10 h-10 rounded-full bg-orange-900/30 flex items-center justify-center text-orange-400 mb-2">
                        <i class="fa-solid fa-temperature-half"></i>
                    </div>
                    <h3 class="text-slate-400 text-[10px] font-bold uppercase tracking-widest">Coolant Temp</h3>
                    <div class="font-hud text-3xl font-bold text-white my-1" id="val-ct">0°</div>
                    <div class="text-[9px] text-orange-400">NORMAL RANGE</div>
                </div>

                <!-- PRESSURE -->
                <div
                    class="glass-panel rounded-lg p-4 flex flex-col justify-center items-center min-h-[140px] relative group h-full">
                    <div class="absolute inset-0 bg-purple-500/5 group-hover:bg-purple-500/10 transition-colors"></div>
                    <div
                        class="w-10 h-10 rounded-full bg-purple-900/30 flex items-center justify-center text-purple-400 mb-2">
                        <i class="fa-solid fa-wind"></i>
                    </div>
                    <h3 class="text-slate-400 text-[10px] font-bold uppercase tracking-widest">Fuel Pressure</h3>
                    <div class="font-hud text-3xl font-bold text-white my-1" id="val-fp">0.0</div>
                    <div class="text-[9px] text-purple-400">BAR</div>
                </div>

                <!-- FAILURE PROB -->
                <div
                    class="glass-panel rounded-lg p-4 flex flex-col justify-center items-center min-h-[140px] relative group h-full">
                    <div
                        class="w-10 h-10 rounded-full bg-red-900/30 flex items-center justify-center text-red-500 mb-2">
                        <i class="fa-solid fa-triangle-exclamation"></i>
                    </div>
                    <h3 class="text-slate-400 text-[10px] font-bold uppercase tracking-widest">Risk Level</h3>
                    <div class="font-hud text-3xl font-bold text-green-500 my-1" id="val-prob">0%</div>
                    <div class="text-[9px] text-slate-400">AI CONFIDENCE</div>
                </div>
            </div>

            <!-- RIGHT: CAR VISUAL (75%) -->
            <div
                class="col-span-9 glass-panel rounded-xl relative flex items-center justify-center bg-gradient-to-br from-slate-900/60 to-transparent overflow-hidden border-2 border-slate-800">

                <!-- Background Grid -->
                <div class="absolute inset-0"
                    style="background-image: linear-gradient(rgba(56,189,248,0.03) 1px, transparent 1px), linear-gradient(90deg, rgba(56,189,248,0.03) 1px, transparent 1px); background-size: 40px 40px;">
                </div>

                <div class="absolute top-4 left-4 z-20">
                    <div class="text-xs font-hud text-cyan-400 tracking-widest mb-1">DIGITAL TWIN // LIVE</div>
                    <div class="h-0.5 w-12 bg-cyan-500"></div>
                </div>

                <!-- CAR SVG - HIGH VISIBILITY PATH -->
                <div class="relative w-[90%] h-[80%] flex items-center justify-center z-10 p-10">
                    <svg viewBox="0 0 800 350" class="w-full h-full drop-shadow-[0_0_15px_rgba(34,211,238,0.4)]">
                        <!-- Neon Outline Car -->
                        <path
                            d="M100,240 L120,180 L250,160 L350,110 L550,110 L680,170 L700,240 L750,260 L750,290 L680,290 A40,40 0 0,1 600,290 L200,290 A40,40 0 0,1 120,290 L50,290 L50,260 Z"
                            class="car-path" />
                        <!-- Roof/Window Lines -->
                        <path d="M160,160 L240,120 L450,120 L550,170" class="car-path"
                            style="stroke-dasharray: 5,5; stroke-width: 1px; fill: none;" />
                        <!-- Wheels -->
                        <circle cx="160" cy="290" r="45" style="fill:none; stroke:#475569; stroke-width:3;" />
                        <circle cx="640" cy="290" r="45" style="fill:none; stroke:#475569; stroke-width:3;" />
                        <!-- Hubcaps -->
                        <circle cx="160" cy="290" r="15" style="fill:#1e293b; stroke:#0ea5e9; stroke-width:2;" />
                        <circle cx="640" cy="290" r="15" style="fill:#1e293b; stroke:#0ea5e9; stroke-width:2;" />
                    </svg>

                    <!-- MARKERS (Positioned via % on the container) -->
                    <!-- Engine -->
                    <div id="pt-engine" class="part-marker" style="top: 55%; left: 23%;"></div>
                    <div class="ar-label">ENGINE OVERHEAT</div>

                    <!-- Radiator -->
                    <div id="pt-rad" class="part-marker" style="top: 60%; left: 12%;"></div>
                    <div class="ar-label">RADIATOR LEAK</div>

                    <!-- Fuel -->
                    <div id="pt-fuel" class="part-marker" style="top: 60%; left: 78%;"></div>
                    <div class="ar-label">FUEL SYSTEM FAIL</div>

                    <!-- Transmission -->
                    <div id="pt-trans" class="part-marker" style="top: 70%; left: 45%;"></div>
                    <div class="ar-label">TRANS SLIPPAGE</div>

                    <!-- Exhaust -->
                    <div id="pt-exh" class="part-marker" style="top: 85%; left: 55%;"></div>
                    <div class="ar-label">CATALYST EFFICIENCY</div>
                </div>

                <!-- CHART OVERLAY (Bottom Right) -->
                <div
                    class="absolute bottom-4 right-4 w-64 h-32 glass-panel rounded-lg p-2 bg-slate-900/80 z-20 border border-slate-700">
                    <canvas id="miniChart"></canvas>
                </div>

                <!-- ALERT BANNER -->
                <div id="live-alert-box" class="absolute top-4 right-4 z-30 hidden animate-bounce">
                    <div
                        class="bg-red-600 text-white px-6 py-3 rounded-lg shadow-[0_0_20px_rgba(239,68,68,0.6)] flex items-center gap-3 border border-red-400">
                        <i class="fa-solid fa-triangle-exclamation text-xl"></i>
                        <div>
                            <div class="font-bold font-hud text-sm">CRITICAL WARNING</div>
                            <div class="text-xs" id="live-alert-msg">Engine Temp Critical</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- PAGE 2: HEALTH (Unchanged logic, style improved) -->
        <div id="page-health" class="hidden h-full max-w-6xl mx-auto flex-col gap-6 overflow-y-auto pr-2">
            <!-- Header -->
            <div
                class="glass-panel rounded-xl p-6 flex justify-between items-center border-l-4 border-green-500 bg-gradient-to-r from-green-900/20 to-transparent">
                <div>
                    <h2 class="font-hud text-2xl font-bold text-white">Maintenance Prognostics</h2>
                    <p class="text-slate-400 text-sm mt-1">AI-based RUL predictions (Remaining Useful Life)</p>
                </div>
                <div class="text-center">
                    <div class="font-hud text-5xl font-bold text-green-400" id="rul-score">98%</div>
                    <div class="text-[10px] uppercase tracking-[0.2em] text-slate-500">System Health</div>
                </div>
            </div>

            <!-- CARDS GRID -->
            <div class="grid grid-cols-2 lg:grid-cols-4 gap-4">
                <!-- FUEL -->
                <div class="glass-panel p-5 rounded-xl hover:translate-y-[-2px] transition-transform duration-300">
                    <div class="flex justify-between items-start mb-4">
                        <div
                            class="w-10 h-10 rounded-lg bg-blue-500/10 flex items-center justify-center text-blue-400 text-xl">
                            <i class="fa-solid fa-gas-pump"></i>
                        </div>
                        <span class="font-hud text-green-400 text-sm" id="rul-fuel">6+ Months</span>
                    </div>
                    <h3 class="font-bold text-slate-200">Fuel System</h3>
                    <div class="w-full bg-slate-800 h-1.5 rounded-full mt-3 mb-1 overflow-hidden">
                        <div class="h-full bg-green-500 w-[95%]" id="bar-fuel"></div>
                    </div>
                    <p class="text-xs text-slate-500">Pressure stable (3.5 Bar)</p>
                </div>

                <!-- COOLING -->
                <div class="glass-panel p-5 rounded-xl hover:translate-y-[-2px] transition-transform duration-300">
                    <div class="flex justify-between items-start mb-4">
                        <div
                            class="w-10 h-10 rounded-lg bg-orange-500/10 flex items-center justify-center text-orange-400 text-xl">
                            <i class="fa-solid fa-temperature-full"></i>
                        </div>
                        <span class="font-hud text-green-400 text-sm" id="rul-cool">6+ Months</span>
                    </div>
                    <h3 class="font-bold text-slate-200">Cooling</h3>
                    <div class="w-full bg-slate-800 h-1.5 rounded-full mt-3 mb-1 overflow-hidden">
                        <div class="h-full bg-green-500 w-[92%]" id="bar-cool"></div>
                    </div>
                    <p class="text-xs text-slate-500">Thermostat responsive</p>
                </div>

                <!-- ENGINE -->
                <div class="glass-panel p-5 rounded-xl hover:translate-y-[-2px] transition-transform duration-300">
                    <div class="flex justify-between items-start mb-4">
                        <div
                            class="w-10 h-10 rounded-lg bg-purple-500/10 flex items-center justify-center text-purple-400 text-xl">
                            <i class="fa-solid fa-gears"></i>
                        </div>
                        <span class="font-hud text-green-400 text-sm" id="rul-eng">6+ Months</span>
                    </div>
                    <h3 class="font-bold text-slate-200">Engine Block</h3>
                    <div class="w-full bg-slate-800 h-1.5 rounded-full mt-3 mb-1 overflow-hidden">
                        <div class="h-full bg-green-500 w-[98%]" id="bar-eng"></div>
                    </div>
                    <p class="text-xs text-slate-500">Vibration nominal</p>
                </div>

                <!-- CATALYST -->
                <div class="glass-panel p-5 rounded-xl hover:translate-y-[-2px] transition-transform duration-300">
                    <div class="flex justify-between items-start mb-4">
                        <div
                            class="w-10 h-10 rounded-lg bg-slate-500/10 flex items-center justify-center text-slate-400 text-xl">
                            <i class="fa-solid fa-smog"></i>
                        </div>
                        <span class="font-hud text-yellow-500 text-sm" id="rul-cat">4 Months</span>
                    </div>
                    <h3 class="font-bold text-slate-200">Catalyst</h3>
                    <div class="w-full bg-slate-800 h-1.5 rounded-full mt-3 mb-1 overflow-hidden">
                        <div class="h-full bg-yellow-500 w-[75%]" id="bar-cat"></div>
                    </div>
                    <p class="text-xs text-slate-500">Efficiency 85%</p>
                </div>
            </div>

            <div class="p-4 bg-slate-900/50 rounded-xl border border-slate-800 text-center text-sm text-slate-500">
                <i class="fa-solid fa-shield-halved mr-2 text-cyan-500"></i>
                Data verified by <strong>FEDXAI-Edge v4.2</strong>. Next scan scheduled automatically.
            </div>
        </div>
    </div>

    <!-- SCRIPTS -->
    <script>
        // --- PAGE SWITCHING ---
        function showPage(id) {
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
            document.getElementById(`nav-${id}`).classList.add('active');

            document.getElementById('page-live').classList.add('hidden');
            document.getElementById('page-health').classList.add('hidden');

            if (id === 'live') {
                document.getElementById('page-live').classList.remove('hidden');
                document.getElementById('page-live').classList.add('grid');
            } else {
                document.getElementById('page-health').classList.remove('hidden');
                document.getElementById('page-health').classList.add('flex');
            }
        }

        // --- CHART SETUP ---
        const ctx = document.getElementById('miniChart').getContext('2d');
        const chart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: Array(20).fill(''),
                datasets: [
                    { label: 'RPM', data: Array(20).fill(0), borderColor: '#22d3ee', borderWidth: 2, tension: 0.4, pointRadius: 0 },
                    { label: 'Temp', data: Array(20).fill(0), borderColor: '#f97316', borderWidth: 2, tension: 0.4, pointRadius: 0 }
                ]
            },
            options: {
                responsive: true, maintainAspectRatio: false,
                plugins: { legend: { display: false } },
                scales: { x: { display: false }, y: { display: false } },
                animation: false
            }
        });

        // --- UI UPDATERS ---
        function updateLiveUI(data) {
            // Update Text
            document.getElementById('val-rpm').innerText = data.rpm.toFixed(0);
            document.getElementById('val-ct').innerText = data.ct.toFixed(1) + '°';
            document.getElementById('val-fp').innerText = data.fp.toFixed(1);

            // Bar Width
            const rpmPct = Math.min(100, (data.rpm / 80));
            document.getElementById('bar-rpm').style.width = rpmPct + '%';

            // Chart Push
            chart.data.datasets[0].data.push(data.rpm / 80);
            chart.data.datasets[1].data.push(data.ct);
            chart.data.datasets.forEach(ds => ds.data.shift());
            chart.update('none');
        }

        function triggerAlert(componentId, msg, isCritical) {
            // Reset
            document.querySelectorAll('.part-critical').forEach(el => el.classList.remove('part-critical'));
            document.getElementById('live-alert-box').classList.add('hidden');

            const probEl = document.getElementById('val-prob');

            if (isCritical) {
                // FAILURE MODE
                const prob = (85 + Math.random() * 10).toFixed(1);
                probEl.innerText = prob + '%';
                probEl.className = "font-hud text-3xl font-bold text-red-500 my-1 animate-pulse";

                // Show Alert Banner
                document.getElementById('live-alert-box').classList.remove('hidden');
                document.getElementById('live-alert-msg').innerText = msg;

                // Highlight Map Marker
                if (componentId) document.getElementById(componentId).classList.add('part-critical');

                // Health Page Impact
                document.getElementById('rul-score').innerText = "CRITICAL";
                document.getElementById('rul-score').className = "font-hud text-5xl font-bold text-red-500 animate-pulse";
                if (componentId === 'pt-fuel') updateHealthBar('fuel', 'IMMEDIATE', '5%', 'bg-red-500');
                if (componentId === 'pt-rad') updateHealthBar('cool', '1 Week', '10%', 'bg-red-500');

            } else {
                // NORMAL MODE
                probEl.innerText = (Math.random() * 5).toFixed(1) + '%';
                probEl.className = "font-hud text-3xl font-bold text-green-500 my-1";

                // Reset Health
                document.getElementById('rul-score').innerText = "98%";
                document.getElementById('rul-score').className = "font-hud text-5xl font-bold text-green-400";
                updateHealthBar('fuel', '6+ Months', '95%', 'bg-green-500');
                updateHealthBar('cool', '6+ Months', '92%', 'bg-green-500');
            }
        }

        function updateHealthBar(id, text, width, colorClass) {
            document.getElementById(`rul-${id}`).innerText = text;
            const bar = document.getElementById(`bar-${id}`);
            bar.className = `h-full w-full transition-all duration-1000 ${colorClass}`;
            bar.style.width = width;

            // Text Color
            const txt = document.getElementById(`rul-${id}`);
            txt.className = `font-hud text-sm ${colorClass.replace('bg-', 'text-')}`;
        }

        // --- SIMULATION ---
        let simInterval;
        function startSimulation() {
            if (simInterval) clearInterval(simInterval);
            let t = 0;
            simInterval = setInterval(() => {
                t += 0.1;
                // Generate Data
                const rpm = 3000 + Math.sin(t) * 1000 + Math.random() * 200;
                const ct = 90 + Math.sin(t * 0.5) * 5;
                const fp = 3.5 + Math.cos(t) * 0.2;
                updateLiveUI({ rpm, ct, fp });

                // Failures
                const cycle = Math.floor(t) % 20;
                if (cycle > 15 && cycle < 18) {
                    triggerAlert('pt-fuel', "Fuel Pressure Critical (<1.5 Bar)", true);
                    updateLiveUI({ rpm: rpm * 0.9, ct: ct, fp: 1.2 });
                } else if (cycle > 18) {
                    triggerAlert('pt-rad', "Coolant Overheat (>110°C)", true);
                    updateLiveUI({ rpm: rpm, ct: 115, fp: fp });
                } else {
                    triggerAlert(null, "System OK", false);
                }
            }, 600);
        }

        // --- BLE CONNECT ---
        const SERVICE_UUID = '4fafc201-1fb5-459e-8fcc-c5c9c331914b';
        const CHAR_PROB_UUID = 'beb5483e-36e1-4688-b7f5-ea07361b26a9';
        const CHAR_ALERT_UUID = 'beb5483e-36e1-4688-b7f5-ea07361b26aa';
        const CHAR_SENSORS_UUID = 'beb5483e-36e1-4688-b7f5-ea07361b26ab';

        async function connectBLE() {
            clearInterval(simInterval);
            try {
                if (!navigator.bluetooth) throw new Error("Web Bluetooth unavailable.");
                const device = await navigator.bluetooth.requestDevice({ filters: [{ name: 'FedXAI-Dongle' }], optionalServices: [SERVICE_UUID] });
                const server = await device.gatt.connect();
                const service = await server.getPrimaryService(SERVICE_UUID);

                const charSens = await service.getCharacteristic(CHAR_SENSORS_UUID);
                await charSens.startNotifications();
                charSens.addEventListener('characteristicvaluechanged', e => updateLiveUI(JSON.parse(new TextDecoder().decode(e.target.value))));

                const charAlert = await service.getCharacteristic(CHAR_ALERT_UUID);
                await charAlert.startNotifications();
                charAlert.addEventListener('characteristicvaluechanged', e => {
                    const msg = new TextDecoder().decode(e.target.value);
                    if (msg.includes("Fuel")) triggerAlert('pt-fuel', msg, true);
                    else if (msg.includes("Coolant")) triggerAlert('pt-rad', msg, true);
                    else triggerAlert(null, msg, false);
                });

                document.getElementById('btn-conn').innerText = "LINKED";
                document.getElementById('btn-conn').className = "bg-green-600 px-3 py-1 rounded text-[10px] font-bold shadow-lg";

            } catch (e) { alert(e); }
        }
    </script>
</body>

</html>